---
title: "Introduction to R and the tidyverse"
subtitle: "Exercise 1 --- PMAP 8551/4551, SEMESTER YEAR"
author: "YOUR NAME HERE"
date: "DATE GOES HERE"
date-format: "long"
format:
  html:
    toc: true
    knitr:
      opts_chunk: 
        dev: "ragg_png"
        dpi: 300
  typst:
    toc: true
    include-before-body: 
      text: |
        #show link: set text(fill: rgb("e16462"))

        // Keep track of previous heading levels
        #let last-heading-level = state("last-heading-level", 0)

        // Add page breaks before all level 1 headings
        // Add page breaks before level 2 headings that don't come after level 1
        #show heading: it => {
          context {
            let prev-level = last-heading-level.get()

            if it.level == 1 {
              pagebreak(weak: true)
              last-heading-level.update(1)
            } else if it.level == 2 {
              if prev-level != 1 {
                pagebreak(weak: true)
              }
              last-heading-level.update(2)
            } else {
              last-heading-level.update(it.level)
            }
          }
          it
        }
  pdf:
    toc: true
  docx:
    toc: true
---

# Task 1: Session check-in

::: {.callout-tip title="Answer"}
Hopefully you wrote some interesting and muddy things!
:::


# Task 2: Penguins

## Data description

For this exercise, you'll be exploring data about 333 penguins living across three islands in Antarctica. See [this website](https://allisonhorst.github.io/palmerpenguins/) for complete details about the data and the variables included.

```{r}
#| label: load-libraries-data
#| warning: false
#| message: false

library(tidyverse)

penguins <- read_csv("data/penguins.csv") |> 
  drop_na(sex)
```

## Recreate scatterplot

Run the code chunk below to see a plot.

```{r fig.path="images/"}
#| label: recreate-me-1
#| echo: false
#| ref.label: recreation-plot-1
```

Use `ggplot()` in the chunk below to re-create the plot above.

::: {.callout-tip title="Answer"}

```{r}
#| label: recreation-plot-1

ggplot(penguins, aes(x = bill_len, y = body_mass, color = species)) +
  geom_point()
```

:::

## Recreate histogram

Run the code chunk below to see a plot.

```{r fig.path="images/"}
#| label: recreate-me-2
#| echo: false
#| ref.label: recreation-plot-2
```

Use `ggplot()` in the chunk below to re-create the plot above (hint---it's a histogram with a bin width of 200 grams).

::: {.callout-tip title="Answer"}

```{r}
#| label: recreation-plot-2

ggplot(penguins, aes(x = body_mass, fill = sex)) +
  geom_histogram(binwidth = 200) +
  facet_wrap(vars(sex))
```

:::

## Recreate scatterplot

Run the code chunk below to see a plot.

```{r fig.path="images/"}
#| label: recreate-me-3
#| echo: false
#| ref.label: recreation-plot-3
```

Insert a new chunk below and use `ggplot()` re-create the plot above.

::: {.callout-tip title="Answer"}

```{r}
#| label: recreation-plot-3

ggplot(penguins, aes(x = flipper_len, y = body_mass, color = island)) +
  geom_point() +
  facet_wrap(vars(species))
```

:::

## Recreate filtered dataset

Here are all the Chinstrap penguins that weigh more than 4,000 grams:

```{r}
#| label: recreate-me-data-1
#| echo: false
#| message: false
#| ref.label: recreation-data-1
```

Use `filter()` in the chunk below to re-create that dataset:

::: {.callout-tip title="Answer"}

```{r}
#| label: recreation-data-1
penguins |> 
  filter(species == "Chinstrap", body_mass > 4000)
```

:::

## Recreate summarized dataset

Here are the average weights of male penguins across the three islands:

```{r}
#| label: recreate-me-data-2
#| echo: false
#| message: false
#| ref.label: recreation-data-2
```

Insert a chunk below and use `filter()`, `group_by()`, and `summarize()` to re-create that dataset:

::: {.callout-tip title="Answer"}

```{r}
#| label: recreation-data-2
penguins |> 
  filter(sex == "male") |> 
  group_by(island) |> 
  summarize(avg_weight = mean(body_mass))
```

:::


# Task 3: Extension

Copy the code for one of your plots or tables above and paste it into the chunk below. Do some extra things to it, like changing the labels, changing the colors, adding a new geom, plotting a different variable from the dataset, changing the theme, or whatever. **This is your chance to play around and explore.**

::: {.callout-tip title="Answer"}

Hopefully you did something neat! Here's something I did:

```{r}
#| label: extension
#| message: false

ggplot(penguins, aes(x = flipper_len, y = body_mass)) +
  geom_point(aes(color = species)) +
  geom_smooth(method = "lm") +
  labs(
    x = "Flipper length (mm)", 
    y = "Body mass (g)", 
    color = "Species", 
    title = "Penguins!"
  )
```

:::
